import{a as V}from"./chunk-7IKDH5C7.js";import"./chunk-BUHBS7HV.js";import{a as k,b as a,c as N,d as E,e as R,g as j,h as z,k as D,l as $,n as q}from"./chunk-OV4NVSWT.js";import{$ as P,A as g,B as d,Da as I,Ga as x,H as n,I as v,M as C,N as s,P as i,Q as c,R as O,U as b,V as f,W as u,Z as m,_ as w,ra as T,s as h,sa as A,ua as S,w as F,x as _}from"./chunk-T663EOGS.js";function B(r,t){r&1&&(i(0,"h3"),m(1,"Para continuar, inicia sesi\xF3n en RecetApp."),c())}function U(r,t){r&1&&(i(0,"h3"),m(1,"Crear una cuenta en RecetApp."),c())}function Y(r,t){if(r&1&&(i(0,"div",13),m(1),c()),r&2){let e=u().$implicit,o=u();n(),P(" ",o.errorMessages[e.formControlName]," ")}}function H(r,t){if(r&1){let e=b();i(0,"div",9)(1,"label",10),m(2),c(),i(3,"input",11),f("input",function(){let l=g(e).$implicit,p=u();return d(p.validateField(l.formControlName,!0))})("blur",function(){let l=g(e).$implicit,p=u();return d(p.validateField(l.formControlName,!1))}),c(),C(4,Y,2,1,"div",12),c()}if(r&2){let e=t.$implicit,o=u();n(),s("for",e.formControlName),n(),w(e.label),n(),s("formControlName",e.formControlName)("type",e.type)("placeholder",e.placeholder),n(),s("ngIf",o.errorMessages[e.formControlName])}}function J(r,t){if(r&1){let e=b();i(0,"div",14),m(1," \xBFNo tienes cuenta? "),i(2,"span",15),f("click",function(){g(e);let l=u();return d(l.changeFormType("register"))})("keypress",function(){return g(e),d({})}),m(3,"Registrate"),c()()}}function K(r,t){if(r&1){let e=b();i(0,"div",14),m(1," \xBFYa tienes cuenta? "),i(2,"span",15),f("click",function(){g(e);let l=u();return d(l.changeFormType("login"))})("keypress",function(){return g(e),d({})}),m(3,"Inicia sesi\xF3n"),c()()}}var y=class r{constructor(t,e,o){this.fb=t;this.asAuthService=e;this.router=o}formType="login";formFields=[];authForm=new R({});errorMessages={};observables$=[];errorSession=!1;ngOnInit(){this.initializeForm(),this.setFormFields()}initializeForm(t){this.authForm=this.fb.group({email:[t||"",[a.required,a.email]],password:["",[a.required,a.minLength(6)]],confirmPassword:[""]},{validators:this.formType==="register"?Q("password","confirmPassword"):null}),this.formType==="register"&&this.authForm.get("confirmPassword")?.setValidators([a.required])}ngOnDestroy(){this.observables$.forEach(t=>t.unsubscribe())}setFormFields(){this.formFields=[{label:"Direcci\xF3n de correo electr\xF3nico",formControlName:"email",type:"text",placeholder:"Ingrese su email",validators:[a.required,a.email]},{label:"Contrase\xF1a",formControlName:"password",type:"password",placeholder:"Ingrese su contrase\xF1a",validators:[a.required,a.minLength(6)]}],this.formType==="register"&&this.formFields.push({label:"Repetir Contrase\xF1a",formControlName:"confirmPassword",type:"password",placeholder:"Repita su contrase\xF1a",validators:[a.required,a.minLength(6)]})}validateField(t,e){this.authForm.get(t)&&(e&&this.errorMessages[t]?this.errorMessages[t]=this.getErrorMessage(t):e||(this.errorMessages[t]=this.getErrorMessage(t)))}getErrorMessage(t){let e=this.authForm.get(t);if(e&&e.errors){if(e.errors.required)return"Este campo es obligatorio.";if(e.errors.email)return"Ingrese un correo electr\xF3nico v\xE1lido.";if(e.errors.minlength)return`La contrase\xF1a debe tener al menos ${e.errors.minlength.requiredLength} caracteres.`;if(t==="confirmPassword"&&this.authForm.errors?.mustMatch)return"Las contrase\xF1as no coinciden."}return""}onSubmit(){this.authForm.valid&&(this.formType==="register"?this.register():this.formType==="login"&&this.login())}changeFormType(t,e){this.formType=t,this.initializeForm(e),this.setFormFields()}register(){let t={email:this.authForm.get("email")?.value,password:this.authForm.get("password")?.value},e=this.asAuthService.register(t).subscribe({next:o=>{this.changeFormType("login",o.email)},error:o=>{console.log("error from component: ",o)}});this.observables$.push(e)}login(){let t={email:this.authForm.get("email")?.value,password:this.authForm.get("password")?.value},e=this.asAuthService.logIn(t).subscribe({next:()=>{this.errorSession=!1,this.router.navigate(["/","recipes"])},error:o=>{this.errorSession=!0,console.log("error from component: ",o)}});this.observables$.push(e)}static \u0275fac=function(e){return new(e||r)(v($),v(V),v(I))};static \u0275cmp=F({type:r,selectors:[["app-auth-page"]],inputs:{formType:"formType"},decls:12,vars:8,consts:[[1,"login-auth-page"],[1,"login-auth-wrapper"],[4,"ngIf"],[1,"separator"],[1,"login-auth-form",3,"ngSubmit","formGroup"],["class","form-group py-1",4,"ngFor","ngForOf"],["class","form-steps",4,"ngIf"],[1,"form-action"],["type","submit",1,"login","social-btn",3,"disabled"],[1,"form-group","py-1"],[3,"for"],[1,"form-input",3,"input","blur","formControlName","type","placeholder"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"form-steps"],[1,"fw-bold","cursor-pointer",3,"click","keypress"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1),C(2,B,2,0,"h3",2)(3,U,2,0,"h3",2),O(4,"div",3),i(5,"form",4),f("ngSubmit",function(){return o.onSubmit()}),C(6,H,5,6,"div",5)(7,J,4,0,"div",6)(8,K,4,0,"div",6),i(9,"div",7)(10,"button",8),m(11),c()()()()()),e&2&&(n(2),s("ngIf",o.formType==="login"),n(),s("ngIf",o.formType==="register"),n(2),s("formGroup",o.authForm),n(),s("ngForOf",o.formFields),n(),s("ngIf",o.formType==="login"),n(),s("ngIf",o.formType==="register"),n(2),s("disabled",o.authForm.invalid),n(),P(" ",o.formType==="login"?"Iniciar sesi\xF3n":"Crear cuenta"," "))},dependencies:[T,A,j,k,N,E,z,D],styles:[".login-auth-page[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;background-color:var(--color-3);color:var(--color-4);display:flex;justify-content:center;flex-direction:column;align-items:center;align-content:center}.login-auth-page[_ngcontent-%COMP%]   .login-auth-wrapper[_ngcontent-%COMP%]{width:25%;display:flex;justify-content:center;flex-direction:column;align-items:center}.login-auth-page[_ngcontent-%COMP%]   .login-social-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;width:100%}.login-auth-page[_ngcontent-%COMP%]   .social-btn[_ngcontent-%COMP%]{border:0;padding:.5rem 2rem;width:100%;font-size:var(--font-size-2);border-radius:var(--border-radius-2);box-shadow:var(--shadow-1);border:solid 1px var(--color-3);background-color:var(--color-3);font-weight:600}.login-auth-page[_ngcontent-%COMP%]   .login-social-zone[_ngcontent-%COMP%]   .social-btn.btn-fb[_ngcontent-%COMP%]{background-color:#3a61b3;color:var(--color-3)}.login-auth-page[_ngcontent-%COMP%]   .login-social-zone[_ngcontent-%COMP%]   .social-btn.btn-apple[_ngcontent-%COMP%]{background-color:#1a1a1a;color:var(--color-3)}.login-auth-page[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{width:100%;margin:2rem 0;border-bottom:solid 1px var(--color-4);opacity:.2}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-start;flex-direction:column}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:column}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:solid 1px #e7e7e7;border-radius:var(--border-radius-1);height:30px;padding:.25rem .5rem;font-size:90%}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-bottom:.35rem;font-weight:600;display:inline-block;margin:0}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   .form-steps[_ngcontent-%COMP%]{padding:.5rem 0}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   .form-steps[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--color-4);font-size:85%;font-weight:500;text-decoration:underline}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   .form-steps[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--color-1)}.login-auth-page[_ngcontent-%COMP%]   .login-auth-form[_ngcontent-%COMP%]   .form-action[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{color:var(--color-4);margin:1rem 0;background-color:var(--color-1)}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:solid 2px red!important}.error-form[_ngcontent-%COMP%]{color:red}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-family:var(--font-family-1)}button[_ngcontent-%COMP%]:disabled{opacity:.5}"]})};function Q(r,t){return e=>{let o=e,l=o.controls[r],p=o.controls[t];return p.errors&&!p.errors.mustMatch?null:l.value!==p.value?(p.setErrors({mustMatch:!0}),{mustMatch:!0}):(p.setErrors(null),null)}}var W=[{path:"",component:y},{path:"**",redirectTo:"/auth"}],M=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=_({type:r});static \u0275inj=h({imports:[x.forChild(W),x]})};var L=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=_({type:r});static \u0275inj=h({imports:[S,q,M]})};export{L as AuthModule};
